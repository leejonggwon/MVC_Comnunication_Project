<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.spring.mapper.LikeMapper">
	
	<!--likeCount +1-->
	<update id="likePlus" parameterType="int">
		UPDATE CM_BOARD SET LIKECOUNT = LIKECOUNT + 1 WHERE IDX = #{idx}
	</update>
	
	<!--likeCount -1-->
	<delete id="unLike" parameterType="int">
		UPDATE CM_BOARD SET LIKECOUNT = LIKECOUNT - 1 WHERE IDX = #{idx}
	</delete>
	
	<!--Like객체생성-->
	<insert id="insertLike" parameterType="kr.spring.entity.Like">
		INSERT INTO CM_LIKE(IDX, MEMID)
		VALUES (#{idx}, #{memID})               
	</insert>
	
	<!--Like객체삭제-->
	<delete id="deleteLike" parameterType="kr.spring.entity.Like">
		DELETE FROM CM_LIKE WHERE IDX = #{idx} AND MEMID = #{memID}
	</delete>
	
	<!--Like객체 likeAvailable 불러오기-->
	<select id="selectLike" parameterType="kr.spring.entity.Like" resultType="int">
		SELECT LIKEAVAILABLE FROM CM_LIKE WHERE IDX = #{idx} AND MEMID = #{memID}
	</select>
	
	<!--likeCount 불러오기-->
	<select id="likeCount" parameterType="int" resultType="kr.spring.entity.Board">
		SELECT LIKECOUNT FROM CM_BOARD WHERE IDX = #{idx}
	</select>
	

</mapper>